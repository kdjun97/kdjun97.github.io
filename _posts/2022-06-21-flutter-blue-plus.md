---
title: "[Flutter] Android 12 Bluetooth Permission Issue (using flutter_blue plugin)"
excerpt: "flutter_blue_plusë¥¼ ì´ìš©í•œ bluetooth í†µì‹  issue í•´ê²°(Android 12 Permission Issue)"

categories:
  - Flutter
tags:
  - [Flutter]

permalink: /flutter/flutter-blue-plus/

toc: true
toc_sticky: true
toc_label: "Contents"
toc_icon: "lightbulb" # https://fontawesome.com/
 
date: 2022-06-21 08:30:00
last_modified_at: 2022-06-21 08:30:00
published: true
---

## ğŸ˜’ Flutterì™€ Bluetooth ì—°ë™

ì¸í„´ì‹­ì—ì„œ Flutterì™€ `Bluetooth`ë¥¼ ì—°ë™í•´ì•¼í•˜ëŠ” í”„ë¡œì íŠ¸ê°€ ìƒê²¼ë‹¤.  
IoT ì•±ì„ ê°œë°œí•˜ëŠ” í”„ë¡œì íŠ¸ì˜€ê³ , ESP Boardì™€ connectionì„ ë§ºê³  ì„œë¡œ ë°ì´í„°ë¥¼ ì†¡ìˆ˜ì‹ í•˜ëŠ” ê¸°ëŠ¥ì´ í•„ìš”í•˜ì˜€ë‹¤.  
ì²˜ìŒì—ëŠ” Android 11 Versionì„ ì‚¬ìš©í•˜ëŠ” íƒœë¸”ë¦¿ ê¸°ê¸°ì—ì„œ í…ŒìŠ¤íŒ…ì„ ì§„í–‰í•˜ì˜€ë‹¤.  

Flutterì—ì„œ Bluetooth ì—°ê²°ì„ ë„ì™€ì£¼ëŠ” pluginì¸ [flutter_blue](https://pub.dev/packages/flutter_blue)ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°œë°œì„ ì§„í–‰í•˜ì˜€ê³ , ë¬´ë¦¬ ì—†ì´ connectionì´ë‚˜ dataê°€ ì˜ ì˜¤ê°€ëŠ” ê²ƒì„ í™•ì¸í–ˆì—ˆë‹¤.  
í•˜ì§€ë§Œ 2ê°œì›” ë’¤ íƒœë¸”ë¦¿ ê¸°ê¸°ë¥¼ ì¶”ê°€ êµ¬ë§¤í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ì˜€ì„ ë•Œ, ì—ëŸ¬ê°€ ë–´ì—ˆë‹¤.  
ë¶„ëª… ì˜ ë˜ë˜ ê¸°ëŠ¥ë“¤ì´ ì™œ ì•ˆë ê¹Œ ì‚´í´ë³´ì•˜ê³ , ì£¼ëœ ë‚´ìš©ì€ `Android Permission`ì— ê´€í•œ ë‚´ìš©ì´ì˜€ë‹¤.~~scanning ìì²´ê°€ ë˜ì§€ ì•ŠìŒ~~  

`ì´ìœ ëŠ” Android 12 Versionë¶€í„° Permission ì •ì±…ì´ ë°”ë€Œì—ˆë‹¤ëŠ” ì ì´ì—ˆë‹¤.`  
ì¦‰, Android 12 Version ë¯¸ë§Œì˜ ê¸°ê¸°ëŠ” ë¬¸ì œì—†ì§€ë§Œ 12 ë²„ì „ ìœ„ì˜ ê¸°ê¸°ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì´ ì—ëŸ¬ë¥¼ ì¡ì•„ì•¼ í•œë‹¤ëŠ” ë§ì”€.  

---

## ğŸ™„ ì–´ë–»ê²Œ í•´ê²°í• ê¹Œ? 

ë§ì€ ìƒìƒë“¤ì„ í–ˆì—ˆë‹¤.  
ì–´ë–»ê²Œ í•´ê²°ì„ í•  ê²ƒì¸ê°€?  

1. ì•ˆë“œë¡œì´ë“œ 11 ë²„ì „ ì´í•˜ ê¸°ê¸°ë§Œ ì‚¬ìš©í• ê¹Œ?  
1. `AndroidManifest.xml`ì— ê¶Œí•œì„ ì§ì ‘ ì£¼ë©´ ë˜ëŠ”ê°€?  
1. `Permission` ê´€ë ¨ pluginì„ ì‚¬ìš©í•˜ì—¬ ì•± ë‚´ì—ì„œ ê¶Œí•œì„ ìˆ˜ë™ìœ¼ë¡œ ì²´í¬í•´ì¤„ ê²ƒì¸ê°€?  
1. `main.dart` ì‹¤í–‰ ì‹œ, permissionì„ ë°”ë¡œ ì¤˜ë²„ë ¤?  
1. ê·¸ê²ƒë„ ì•„ë‹ˆë¼ë©´ flutter_blue í”ŒëŸ¬ê·¸ì¸ì„ ëœ¯ì–´ì•¼í•˜ë‚˜?
1. ë‹¤ë¥¸ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í• ê¹Œ?  
1. ì•„ì˜ˆ ì•ˆë˜ëŠ”ê±´ê°€? (Flutterë¡œëŠ” ì´ëŸ¬í•œ ì´ìŠˆê°€ ê³„ì† ë°œìƒë  ê²ƒ ê°™ìœ¼ë‹ˆ ë§˜ í¸í•˜ê²Œ nativeë¡œ í• ê¹Œ?)  
1. ~~ì˜¤ëŠ˜ ì €ë… ë­ë¨¹ì§€?~~

ìƒë‹¹íˆ heavyí•œ ìƒê°ë„ ìˆì—ˆê³ , ì´ë ‡ê²Œ í•˜ë©´ ë  ê²ƒ ê°™ì€ë°? í•˜ëŠ” ìƒê°ë„ ìˆì—ˆë‹¤.  
ì†ì´ ë§ì´ ê°€ì§€ ì•ŠëŠ” ê²ƒë“¤ì— í•œí•´ ëª‡ ê°€ì§€ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ì˜€ê³ , í˜„ì‹¤ì ìœ¼ë¡œ ë  ê²ƒ ê°™ì€ í›„ë³´êµ°ë“¤ì„ í…ŒìŠ¤íŠ¸ í•˜ì˜€ë‹¤.  
ê·¸ë¦¬ê³ .... ì—¬ì „íˆ ì˜¤ë¥˜ëŠ” í•´ê²°ë˜ì§€ ì•Šì•˜ë‹¤.....  

ê·¸ë ‡ê²Œ ì‚¬ì•ˆì´ ìƒë‹¹íˆ ë¬´ê±°ì›Œì§€ê³  ìˆì„ ì–´ëŠë‚ ... ~~ë‚ ì´ ì ë‹¹í•œ ì–´ëŠë‚ ....~~  
`í•´ê²° ë°©ë²•ì„ ì°¾ê²Œ ë˜ì—ˆë‹¤.`  

---  

## ğŸ”“ í•´ê²°  

ì‚¬ì‹¤ ì œì¼ ì¢‹ì€ ë°©ë²•ì€, `ì…‹íŒ… ë‹¨ì—ì„œ í•´ê²°ë˜ê±°ë‚˜`, `permissionì„ ì•± ë‚´ì—ì„œ ì£¼ëŠ” ë°©ë²•`, `í”ŒëŸ¬ê·¸ì¸ ë³€ê²½` ìˆœì„œì˜€ë‹¤.  

ê·¸ ì¤‘, í•˜ë‚˜ì˜ ë°©ë²•ì¸ `í”ŒëŸ¬ê·¸ì¸ ë³€ê²½` ë°©ë²•ìœ¼ë¡œ ì´ìŠˆë¥¼ í•´ê²°í•˜ê²Œ ë˜ì˜€ê³ , ê³¼ì •ì€ ì•„ë˜ì™€ ê°™ë‹¤.  

ê¸°ì¡´ì— ì‚¬ìš©í•œ plugin : `flutter_blue: ^0.8.0`  
ì‹ ê·œ ì°¾ì€ plugin : `flutter_blue_plus: ^1.1.3` (ìì„¸í•œ ì •ë³´ëŠ” ì•„ë˜ ë§í¬ ì°¸ì¡°)  
> [flutter_blue_plus](https://pub.dev/packages/flutter_blue_plus)  

ìƒˆë¡œ ì°¾ì€ pluginì„ ì±„íƒí•œ ì´ìœ ëŠ” `ê¸°ì¡´ flutter_blueì˜ upgradeë²„ì „`ì´ë©´ì„œ ì§ë©´í•œ ì´ìŠˆì— ëŒ€í•œ `Changelog`ê°€ ì¡´ì¬í–ˆê¸° ë•Œë¬¸.(Android Permission)   
ë”°ë¼ì„œ, ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ í•¨ìˆ˜ì˜ í‹€ì—ì„œ ë²—ì–´ë‚˜ì§€ ì•Šì§€ë§Œ, Android Version Issue ë¬¸ì œë¥¼ í•´ê²°í•´ì£¼ì—ˆë‹¤ ë¼ê³  ë³´ì•˜ê³ , testë¥¼ í•´ë³¸ ê²°ê³¼ ì•ˆë“œë¡œì´ë“œ 11, 12 ë²„ì „ì—ì„œ flutter ì•±ê³¼ Bluetooth ê¸°ê¸°ê°€ ì˜ í†µì‹ í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.  

ì•„ë˜ëŠ” `flutter_blue` ì—ì„œ `flutter_blue_plus` pluginìœ¼ë¡œ êµì²´í•œ ì†ŒìŠ¤ ì½”ë“œì´ë‹¤.  

```yaml
# ì˜ì¡´ì„± ìˆ˜ì •
dependencies:
  # flutter_blue: ^0.8.0
  # ê¸°ì¡´ í”ŒëŸ¬ê·¸ì¸ ì‚­ì œ
  flutter_blue_plus: ^1.1.3
```

```dart
// FlutterBlue flutterBlue = FlutterBlue.instance;
// ê¸°ì¡´ flutter_blueì˜ ì¸ìŠ¤í„´ìŠ¤ ì„ ì–¸ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½
FlutterBluePlus flutterBlue = FlutterBluePlus.instance;
```

êµ‰ì¥íˆ ì§§ì€ ì½”ë“œ ë³€ê²½ìœ¼ë¡œ issueë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.  
ì‚¬ì‹¤ ì •ë§ nativeë‹¨ì„ ë§Œì§ˆ ìƒê°ì„ í–ˆì—ˆëŠ”ë°, pluginì´ ë‚˜ì™€ì¤˜ì„œ ì •ë§ ë‹¤í–‰ì´ë‹¤..  

ğŸ”¥ ì•Œê²Œëœ ì‚¬ì‹¤.  
ì˜ ë˜ë˜ ì½”ë“œê°€ ë²„ì „ ì—…ì— ì¸í•´ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.  
ë‹¹í™©í•˜ì§€ ë§ˆë¼. ë°©ë²•ì€ ìˆë‹¤. ê·¸ê²Œ ë­ê°€ ëë“ ...  
{: .notice--warning}  